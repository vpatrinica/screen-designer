<defs>
    <filter id="blur-effect" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="1.5" />
    </filter>
    <style>
      :root {
        --color-power-black: #000000;
        --color-power-off: #555555;
        --color-power-on: #00FF00;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      @keyframes pulse-brightness {
        0% { opacity: 0.6; }
        50% { opacity: 1.0; }
        100% { opacity: 0.6; }
      }
      
      /* --- Styles for Fan 1 --- */
      #power-fan1 {
        --power-color: var(--color-power-off); /* Default 'off' state */
        cursor: pointer;
      }
      #power-fan1.power-on {
        --power-color: var(--color-power-on); /* 'on' state */
      }
      #power-fan1 .intermediate-disk {
        fill: #333333;
      }
      #power-fan1 .power-bg-disk {
        fill: var(--color-power-black);
      }
      #power-fan1 .bg-animated-disk {
        fill: #000000;
      }
      #power-fan1.power-on .bg-animated-disk {
        fill: url(#animated-bg-gradient);
        animation: pulse-brightness 3s ease-in-out infinite;
        filter: url(#glow-filter);
      }
      #power-fan1 .rotor-disk {
        fill: #808080;
      }
      #power-fan1 .fan-blades {
        transform-origin: center;
        transform-box: fill-box;
      }
      #power-fan1.power-on .fan-blades {
        animation: spin 2s linear infinite;
      }
      #power-fan1 .fan-blade {
        fill: #666666;
        stroke: #404040;
        stroke-width: 0.2;
      }
      #power-fan1 .power-line {
        fill: var(--power-color); 
        stroke: none;
      }
      #power-fan1 .power-arc {
        stroke: var(--power-color); 
        fill: none;
        stroke-width: 0.75;
        stroke-linecap: round;
      }

      /* --- Styles for Fan 2 --- */
      #power-fan2 {
        --power-color: var(--color-power-off); /* Default 'off' state */
        cursor: pointer;
      }
      #power-fan2.power-on {
        --power-color: var(--color-power-on); /* 'on' state */
      }
      #power-fan2 .intermediate-disk {
        fill: #333333;
      }
      #power-fan2 .power-bg-disk {
        fill: var(--color-power-black);
      }
      #power-fan2 .bg-animated-disk {
        fill: #000000;
      }
      #power-fan2.power-on .bg-animated-disk {
        fill: url(#animated-bg-gradient);
        animation: pulse-brightness 3s ease-in-out infinite;
        filter: url(#glow-filter);
      }
      #power-fan2 .rotor-disk {
        fill: #808080;
      }
      #power-fan2 .fan-blades {
        transform-origin: center;
        transform-box: fill-box;
      }
      #power-fan2.power-on .fan-blades {
        animation: spin 2s linear infinite;
      }
      #power-fan2 .fan-blade {
        fill: #666666;
        stroke: #404040;
        stroke-width: 0.2;
      }
      #power-fan2 .power-line {
        fill: var(--power-color); 
        stroke: none;
      }
      #power-fan2 .power-arc {
        stroke: var(--power-color); 
        fill: none;
        stroke-width: 0.75;
        stroke-linecap: round;
      }

      .gauge-arc {
        fill: none;
        stroke: #666666;
        stroke-width: 2.25; /* scaled */
        stroke-linecap: round;
      }
      .gauge-arc-extra {
        fill: none;
        stroke-linecap: round;
      }
      .gauge-value-arc {
        fill: none;
        stroke: #00FF00;
        stroke-width: 0.75; /* scaled */
        stroke-linecap: round;
      }
      .gauge-tick {
        stroke: black;
        stroke-width: 0.375;
      }
      .gauge-label {
        fill: black;
        font-size: 3px;
        font-family: Arial, sans-serif;
      }
      .gauge-indicator {
        fill: #000000;
        stroke: #000000;
        stroke-width: 0.3;
      }
      .rpm-text {
        fill: #000000;
        font-size: 5px;
        font-weight: bold;
        font-family: Arial, sans-serif;
      }
      .rpm-value {
        fill: #000000;
        font-size: 4.5px;
        font-weight: bold;
        font-family: Arial, sans-serif;
      }
      .rpm-unit {
        fill: #000000;
        font-size: 2.5px;
        font-family: Arial, sans-serif;
        font-weight: bold;
      }
      .pressure-unit {
        fill: #000000;
        font-size: 3.5px;
        font-family: Arial, sans-serif;
        font-weight: bold;
      }
      /* Fan labels and counters */
      .fan-label {
        fill: #000000;
        font-size: 4px;
        font-weight: bold;
        font-family: 'Roboto', Arial, sans-serif;
      }
      .fan-number {
        fill: #000000;
        font-size: 4px;
        font-family: monospace, monospace;
      }
      .fan-units {
        fill: #000000;
        font-size: 3px;
        font-weight: bold;
        font-family: 'Roboto', Arial, sans-serif;
      }
      .fan-status-symbol {
        fill: gray;
      }
      .status-active {
        animation: pulse-brightness 3s ease-in-out infinite;
        filter: url(#glow-filter);
      }
      .status-label {
        fill: #000000;
        font-size: 3px;
        font-family: Arial, sans-serif;
        text-anchor: middle;
      }
      .pulsating-disk {
        animation: pulsate-red 2s ease-in-out infinite;
      }
      @keyframes pulsate-red {
        0% { opacity: 0.6; }
        50% { opacity: 1.0; }
        100% { opacity: 0.6; }
      }

      /* ===== NEW ANIMATION STYLES ===== */
      @keyframes exhaust-plume {
        0% {
          r: 2;
          opacity: 0.7;
          transform: translateY(0px);
        }
        100% {
          r: 10; /* Grow */
          opacity: 0;
          transform: translateY(20px); /* Move down 20 units */
        }
      }
      
      .plume-particle {
        fill: #ADD8E6; /* Light blueish-white */
        filter: url(#blur-effect);
        animation-name: exhaust-plume;
        /* duration and delay set by JS */
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        transform-origin: center;
        transform-box: fill-box;
      }
    </style>
    <radialGradient id="animated-bg-gradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#B0E0E6;stop-opacity:1.0" />
      <stop offset="50%" style="stop-color:#87CEEB;stop-opacity:1.0" />
      <stop offset="100%" style="stop-color:#4682B4;stop-opacity:0.9" />
    </radialGradient>
    <radialGradient id="disk-gradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1.0" />
      <stop offset="70%" style="stop-color:#F0F0F0;stop-opacity:1.0" />
      <stop offset="100%" style="stop-color:#DADADA;stop-opacity:1.0" />
    </radialGradient>
    <radialGradient id="red-gradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#FF0000;stop-opacity:1.0" />
      <stop offset="100%" style="stop-color:#800000;stop-opacity:1.0" />
    </radialGradient>
    <radialGradient id="status-red-gradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#FF0000;stop-opacity:1.0" />
      <stop offset="100%" style="stop-color:#800000;stop-opacity:1.0" />
    </radialGradient>
    <marker id="arrowhead" markerWidth="3" markerHeight="3" refX="1.5" refY="1.5" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 3 1.5, 0 3" fill="black" />
    </marker>
  </defs>